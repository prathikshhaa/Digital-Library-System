<!DOCTYPE html>
<html>
<head>
    <title>Add Book - Library</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        .message-box {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            display: none;
            text-align: center;
            font-weight: bold;
        }
        .success {
            background: #e6ffed;
            color: #1a7f37;
            border: 1px solid #1a7f37;
        }
        .error {
            background: #ffe6e6;
            color: #a10000;
            border: 1px solid #a10000;
        }
    </style>
</head>
<body>
    <div class="login-wrapper addbook-wrapper">
        <div class="login-card addbook-card">
            <h1>Add Book</h1>
            <div class="subtitle">Enter book details below</div>

            <form id="addBookForm" enctype="multipart/form-data">
                <input type="number" name="user_id" placeholder="Admin User ID" required>
                <input type="text" name="title" placeholder="Book Title" required>
                <input type="text" name="author" placeholder="Author" required>
                <input type="text" name="category" placeholder="Category" required>
                <input type="number" name="total_copies" placeholder="Total Copies" required>
                <!-- <input type="number" name="available_copies" placeholder="Available Copies" required> -->
                <input type="file" name="photo" accept="image/*">
                <button type="submit">Add Book</button>
            </form>

            <!-- Message Box -->
            <div id="messageBox" class="message-box"></div>
        </div>
    </div>

    <script>
        const form = document.getElementById("addBookForm");
        const msgBox = document.getElementById("messageBox");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            try {
                const res = await fetch("/add-book", {
                    method: "POST",
                    body: formData
                });

                const result = await res.json();

                msgBox.style.display = "block";
                if (result.success) {
                    msgBox.className = "message-box success";
                    msgBox.textContent = "✅ Book added successfully!";
                    form.reset();
                } else {
                    msgBox.className = "message-box error";
                    msgBox.textContent = "❌ " + result.message;
                }
            } catch (err) {
                msgBox.style.display = "block";
                msgBox.className = "message-box error";
                msgBox.textContent = "⚠️ Something went wrong!";
            }
        });
    </script>
</body>
</html>
